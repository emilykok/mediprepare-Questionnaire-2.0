@page "/"
@using MediPrepareQuestionair.Database
@using MediPrepareQuestionair.Services
@using System.Text.Json
@using BlazorCurrentDevice
@using Color = MudBlazor.Color

<PageTitle>Index</PageTitle>
<div>
    <h3>Debug</h3>
    <p>@Orientation</p>
    <p>@Type</p>
    <p>@OS</p>
</div>

<p>@value</p>
<MudPaper>
    <MudText Typo="Typo.h1">Top Text</MudText>
    <MudText Typo="Typo.h2">Text</MudText>
    <MudText Typo="Typo.h3">Text</MudText>
    <MudText Typo="Typo.h4">Text</MudText>
    <MudText Typo="Typo.h5">Text</MudText>
    <MudText Typo="Typo.h6">Text</MudText>
    <MudText Typo="Typo.subtitle1">Text</MudText>
    <MudText Typo="Typo.subtitle2">Text</MudText>
    <MudText Typo="Typo.body1" Color="Color.Primary">Bottom Text Primary</MudText>
    <MudText Typo="Typo.body1" Color="Color.Secondary">Text Secondary</MudText>
    <MudText Typo="Typo.body1" Color="Color.Tertiary">Text Tertiary</MudText>
    
    <MudButton Color="Color.Primary">Primary</MudButton>
    <MudButton Color="Color.Secondary">Secondary</MudButton>
    <MudButton Color="Color.Tertiary">Tertiary</MudButton>
    <MudButton Color="Color.Success">Success</MudButton>
    <MudButton Color="Color.Error">Error</MudButton>
    <MudButton Color="Color.Info">Info</MudButton>
    <MudButton Color="Color.Warning">Warning</MudButton>
    <MudButton Color="Color.Dark">Dark</MudButton>
    <MudButton Color="Color.Default">Default</MudButton>
</MudPaper>

<QuestionComponent answerQuestion="answerQuestion" />
<QuestionComponent answerQuestion="SelectOneAnswerQuestion" />
<QuestionComponent answerQuestion="DateQuestion" />
<QuestionComponent answerQuestion="NumberQuestion" />

@code{
    [Inject] IBlazorCurrentDeviceService BlazorCurrentDeviceService { get; set; }
    protected override void OnInitialized()
    {
        answerQuestion.ReferenceQuestion = question;
        base.OnInitialized();
    }
    public bool disabled { get; set; } = false;
    public string value { get; set; } = "";
    public string value2 { get; set; } = "";
    public List<string> values { get; set; } = new List<string>() { "1", "2", "3" };
    public Question question { get; set; } = new Question() { DisplayName = "How are you?" };
    public AnswerQuestion answerQuestion { get; set; } = new();
    public AnswerQuestion SelectOneAnswerQuestion { get; set; } = new AnswerQuestion()
    {
        ReferenceQuestion = new Question()
        {
            DisplayName = "How are you?",
            Type = QuestionType.SelectOne,
            Options = new List<QuestionOptions>()
            {
                new QuestionOptions() {Option = "1"},
                new QuestionOptions() {Option = "2"},
                new QuestionOptions() {Option = "3"}
            }
        }
    };
    public AnswerQuestion DateQuestion { get; set; } = new AnswerQuestion()
    {
        ReferenceQuestion = new Question()
        {
            DisplayName = "When?",
            Type = QuestionType.Date,
        }
    };
    public AnswerQuestion NumberQuestion { get; set; } = new AnswerQuestion()
    {
        ReferenceQuestion = new Question()
        {
            DisplayName = "How many?",
            Type = QuestionType.Numeric,
        }
    };
    public void OnValueChanged(string value)
    {
        // this.value = value;
        // if (value == "3")
        // {
        //     disabled = true;
        //     
        // }
        // StateHasChanged();
    }
    string Orientation { get; set; }
    string Type { get; set; }
    string OS { get; set; }
    
    
    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if(firstRender)
        {
            OS = await BlazorCurrentDeviceService.OS();
            Orientation = await BlazorCurrentDeviceService.Orientation();
            Type = await BlazorCurrentDeviceService.Type();
            StateHasChanged();
        }
    }

}